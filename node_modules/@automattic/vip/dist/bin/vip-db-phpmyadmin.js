#!/usr/bin/env node

/**
 * External dependencies
 */

/**
 * Internal dependencies
 */
"use strict";

var _phpmyadmin = require("../commands/phpmyadmin");
var _command = _interopRequireDefault(require("../lib/cli/command"));
var _tracker = require("../lib/tracker");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const examples = [{
  usage: 'vip @example-app.develop db phpmyadmin',
  description: "Generate access to a read-only phpMyAdmin web interface for the environment's database."
}];
const appQuery = `
	id,
	environments{
		id
		appId
		name
		type
		uniqueLabel
	}
`;
void (0, _command.default)({
  appContext: true,
  appQuery,
  envContext: true,
  module: 'phpmyadmin',
  requiredArgs: 0,
  usage: 'vip db phpmyadmin'
}).examples(examples).argv(process.argv, async (arg, {
  app,
  env
}) => {
  const trackerFn = (0, _tracker.makeCommandTracker)('phpmyadmin', {
    app: app.id,
    env: env.uniqueLabel
  });
  await trackerFn('execute');
  const cmd = new _phpmyadmin.PhpMyAdminCommand(app, env, trackerFn);
  await cmd.run();
  await trackerFn('success');
});