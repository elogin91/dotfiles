"use strict";

exports.__esModule = true;
exports.withError = withError;
var _chalk = require("chalk");
var _debug = _interopRequireDefault(require("debug"));
var _env = _interopRequireDefault(require("../../lib/env"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function withError(message) {
  const msg = message instanceof Error ? message.message : message;
  console.error(`${(0, _chalk.red)('Error: ')} ${msg.replace(/^Error:\s*/, '')}`);

  // Debug ouput is printed below error output both for information
  // hierarchy and to make it more likely that the user copies it to their
  // clipboard when dragging across output.
  console.log(`${(0, _chalk.yellow)('Debug: ')} VIP-CLI v${_env.default.app.version}, Node ${_env.default.node.version}, ${_env.default.os.name} ${_env.default.os.version} ${_env.default.os.arch}`);
  if (_debug.default.names.length > 0 && message instanceof Error) {
    console.error((0, _chalk.yellow)('Debug: '), message);
  }
  process.exit(1);
}