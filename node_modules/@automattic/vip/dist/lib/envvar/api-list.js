"use strict";

exports.__esModule = true;
exports.default = listEnvVars;
var _graphqlTag = _interopRequireDefault(require("graphql-tag"));
var _api = _interopRequireDefault(require("../../lib/api"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const query = (0, _graphqlTag.default)`
	query GetEnvironmentVariables($appId: Int!, $envId: Int!) {
		app(id: $appId) {
			id
			environments(id: $envId) {
				id
				environmentVariables {
					total
					nodes {
						name
					}
				}
			}
		}
	}
`;

// List the names (but not values) of environment variables.
async function listEnvVars(appId, envId) {
  const api = (0, _api.default)();
  const variables = {
    appId,
    envId
  };
  const {
    data
  } = await api.query({
    query,
    variables
  });
  const nodes = data.app?.environments?.[0]?.environmentVariables?.nodes ?? [];
  return nodes.map(entry => entry?.name ?? '');
}