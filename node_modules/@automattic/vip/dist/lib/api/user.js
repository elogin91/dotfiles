"use strict";

exports.__esModule = true;
exports.getCurrentUserInfo = getCurrentUserInfo;
var _graphqlTag = _interopRequireDefault(require("graphql-tag"));
var _api = _interopRequireDefault(require("../../lib/api"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
const QUERY_CURRENT_USER = (0, _graphqlTag.default)`
	query Me {
		me {
			id
			displayName
			isVIP
			organizationRoles {
				nodes {
					organizationId
					roleId
				}
			}
		}
	}
`;
async function getCurrentUserInfo() {
  const api = (0, _api.default)();
  const response = await api.query({
    query: QUERY_CURRENT_USER
  });
  const {
    me
  } = response.data;
  if (!me) {
    throw new Error('The API did not return any information about the user.');
  }
  return me;
}